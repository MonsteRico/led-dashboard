[Unit]
Description=LED Dashboard Update Service
After=network.target
Requires=dashboard.service
Conflicts=dashboard.service

[Service]
Type=oneshot
User=root
WorkingDirectory=/opt/led-dashboard
ExecStart=/opt/led-dashboard/scripts/update-direct.sh %i
StandardOutput=journal
StandardError=journal
RemainAfterExit=yes

# Wait for dashboard service to stop before starting
ExecStartPre=/bin/systemctl stop dashboard.service
ExecStartPre=/bin/sleep 2

# Start dashboard service after update completes
ExecStopPost=/bin/systemctl start dashboard.service

[Install]
WantedBy=multi-user.target
